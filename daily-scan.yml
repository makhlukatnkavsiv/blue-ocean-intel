name: ğŸŒŠ è“æµ·é€‰å“æ—¥æŠ¥

on:
  # æ¯å¤©åŒ—äº¬æ—¶é—´ 10:00 è§¦å‘ï¼ˆUTC 02:00ï¼‰
  schedule:
    - cron: "0 2 * * *"

  # å…è®¸æ‰‹åŠ¨è§¦å‘ï¼ˆæ–¹ä¾¿æµ‹è¯•ï¼‰
  workflow_dispatch:

jobs:
  scan-and-push:
    name: æ‰«æé€‰å“ & æ¨é€é£ä¹¦
    runs-on: ubuntu-latest
    timeout-minutes: 15

    steps:
      - name: æ£€å‡ºä»£ç 
        uses: actions/checkout@v4

      - name: å®‰è£… Node.js
        uses: actions/setup-node@v4
        with:
          node-version: "20"

      - name: è¿è¡Œé€‰å“æ‰«æ & æ¨é€
        env:
          ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}
          FEISHU_WEBHOOK_URL: ${{ secrets.FEISHU_WEBHOOK_URL }}
        run: node scan.js
